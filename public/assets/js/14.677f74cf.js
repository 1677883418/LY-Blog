(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{577:function(v,_,a){"use strict";a.r(_);var l=a(5),e=Object(l.a)({},(function(){var v=this,_=v.$createElement,a=v._self._c||_;return a("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[a("h2",{attrs:{id:"hadoop基本介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hadoop基本介绍"}},[v._v("#")]),v._v(" Hadoop基本介绍")]),v._v(" "),a("ul",[a("li",[v._v("Hadoop技术体系\n"),a("ul",[a("li",[v._v("存储层：HDFS")]),v._v(" "),a("li",[v._v("调度层：YARN")]),v._v(" "),a("li",[v._v("计算框架：MapReduce。值得注意的是另外一个同属于Apache基金会的开源计算框架Apache Spark，当前业界的使用已经远超于MapReduce，尽管它不属于Hadoop项目，但是和Hadoop也有紧密关系。")])])]),v._v(" "),a("li",[v._v("文件系统\n"),a("ul",[a("li",[v._v("单机文件系统：常见的如Windows NTFS，Linux的Ext4，虽然不同的操作系统和实现，但是本质都是一样的，解决相同的问题。")]),v._v(" "),a("li",[v._v("分布式文件系统\n"),a("ul",[a("li",[v._v("分布式文件系统是单机文件的延伸，概念术语是相通的，比如目录、文件、目录树等。")]),v._v(" "),a("li",[v._v("本质上扩展、延伸了单机文件系统，提供了大容量、高可靠、低成本等功能特性；实现上一般也更为复杂。")])])])])]),v._v(" "),a("li",[v._v("分布式存储系统，了解分布式存储系统的分类，理解不同存储系统的使用场景。直观的区别是用户使用方式，本质是针对不同的使用场景提供高效合理的系统。\n"),a("ul",[a("li",[v._v("对象存储：例如AWS的S3，阿里云的OSS，开源的Minio。")]),v._v(" "),a("li",[v._v("块存储：例如AWS的EBS，开源社区也有Ceph等。")]),v._v(" "),a("li",[v._v("文件系统：HDFS、GlusterFS、CubeFS等")]),v._v(" "),a("li",[v._v("数据库：KV数据库比如Cassandra，关系型数据库如TiDB、OceanBase等")])])]),v._v(" "),a("li",[v._v("HDFS功能特性：需要注意HDFS尽管是一个文件系统，但是它没有完整实现POSIX文件系统规范。")])]),v._v(" "),a("h2",{attrs:{id:"架构原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#架构原理"}},[v._v("#")]),v._v(" 架构原理")]),v._v(" "),a("ul",[a("li",[v._v("分布式存储系统的基本概念\n"),a("ul",[a("li",[v._v("容错能力")]),v._v(" "),a("li",[v._v("一致性模型")]),v._v(" "),a("li",[v._v("可扩展性")]),v._v(" "),a("li",[v._v("节点体系模式")]),v._v(" "),a("li",[v._v("数据放置策略")]),v._v(" "),a("li",[v._v("单机存储引擎")])])]),v._v(" "),a("li",[v._v("HDFS组件\n"),a("ul",[a("li",[v._v("Client/SDK：读写操作的发起点，HDFS很多读写逻辑都是在SDK中实现的。")]),v._v(" "),a("li",[v._v("NameNode：元数据节点，是HDFS的中枢节点，也是服务的入口。")]),v._v(" "),a("li",[v._v("DataNode：数据节点，存放实际用户数据。")])])])]),v._v(" "),a("h3",{attrs:{id:"元数据节点namenode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#元数据节点namenode"}},[v._v("#")]),v._v(" 元数据节点NameNode")]),v._v(" "),a("ul",[a("li",[v._v("维护目录树\n"),a("ul",[a("li",[v._v("维护目录树的增删改查操作，保证所有修改都能持久化，以便机器掉电不会造成数据丢失或不一致。")])])]),v._v(" "),a("li",[v._v("维护文件和数据块的关系\n"),a("ul",[a("li",[v._v("文件被切分成多个块，文件以数据块为单位进行多副本存放")])])]),v._v(" "),a("li",[v._v("维护文件块存放节点信息\n"),a("ul",[a("li",[v._v("通过接收DataNode的心跳汇报信息，维护集群节点的拓扑结构和每个文件块所有副本所在的DataNode类表。")])])]),v._v(" "),a("li",[v._v("分配新文件存放节点\n"),a("ul",[a("li",[v._v("Clientt创健新的文件时候，需要有NameNode来确定分配目标DataNode")])])])]),v._v(" "),a("h3",{attrs:{id:"数据节点datanode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据节点datanode"}},[v._v("#")]),v._v(" 数据节点DataNode")]),v._v(" "),a("ul",[a("li",[v._v("数据块存取\n"),a("ul",[a("li",[v._v("DataNode需要高效实现对数据块在硬盘上的存取")])])]),v._v(" "),a("li",[v._v("心跳汇报\n"),a("ul",[a("li",[v._v("把存放在本机的数据块列表发送给NameNode,以便NameNode能维护数据块的位置信息，同时让NameNode确定该节点处于正常存活状态")])])]),v._v(" "),a("li",[v._v("副本复制\n"),a("ul",[a("li",[v._v("数据写入时Pipeline1O操作")]),v._v(" "),a("li",[v._v("机器故障时补全副本")])])])]),v._v(" "),a("h3",{attrs:{id:"关键设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键设计"}},[v._v("#")]),v._v(" 关键设计")]),v._v(" "),a("h3",{attrs:{id:"namenode目录树维护"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#namenode目录树维护"}},[v._v("#")]),v._v(" NameNode目录树维护")]),v._v(" "),a("ul",[a("li",[v._v("fsimage\n"),a("ul",[a("li",[v._v("文件系统目录树")]),v._v(" "),a("li",[v._v("完整的存放在内存中")]),v._v(" "),a("li",[v._v("定时存放到硬盘上")]),v._v(" "),a("li",[v._v("修改是"),a("strong",[v._v("只会修改内存中的目录树")])])])]),v._v(" "),a("li",[v._v("EditLog\n"),a("ul",[a("li",[v._v("目录树的修改日志")]),v._v(" "),a("li",[v._v("clienti更新目录树需要持久化EditLog后才能表示更新成功")]),v._v(" "),a("li",[v._v("EditLog可存放在本地文件系统，也可存放在专用系统上")]),v._v(" "),a("li",[v._v("NameNode HA方案一个关键点就是如何实现EditLog共享")])])])]),v._v(" "),a("h3",{attrs:{id:"namenode数据放置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#namenode数据放置"}},[v._v("#")]),v._v(" NameNode数据放置")]),v._v(" "),a("ul",[a("li",[v._v("数据块信息维护\n"),a("ul",[a("li",[v._v("目录树保存每个文件的块id")]),v._v(" "),a("li",[v._v("NameNode维护了每个数据块所在的节点信息")]),v._v(" "),a("li",[v._v("NameNode根据DataNode汇报的信息动态维护位置信息")]),v._v(" "),a("li",[v._v("NameNode"),a("strong",[v._v("不会持久化")]),v._v("数据块位置信息")])])]),v._v(" "),a("li",[v._v("数据放置策略\n"),a("ul",[a("li",[v._v("新数据存放到哪写节点")]),v._v(" "),a("li",[v._v("数据均衡需要怎么合理搬迁数据")]),v._v(" "),a("li",[v._v("3个副本怎么合理放置")])])])])])}),[],!1,null,null,null);_.default=e.exports}}]);